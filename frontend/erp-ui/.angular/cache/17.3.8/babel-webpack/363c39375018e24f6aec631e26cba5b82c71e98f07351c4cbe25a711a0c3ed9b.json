{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/auth.service\";\nimport * as i2 from \"../services/report.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction DashboardComponent_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.currentUser.fullName);\n  }\n}\nfunction DashboardComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 12)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCDD\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Mes R\\u00E9clamations\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDD14\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Notifications\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 12)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCCB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"R\\u00E9clamations\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\u2705\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Mes T\\u00E2ches\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 13)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDC65\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Gestion \\u00C9quipe\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 14)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCC8\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Rapports\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 13)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDC65\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Gestion Utilisateurs\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 15)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCB0\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Budget & Projets\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\u2699\\uFE0F\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Configuration\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction DashboardComponent_li_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 5)(1, \"a\", 16)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"\\uD83D\\uDCCB\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5, \"Logs & Audit\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nexport let DashboardComponent = /*#__PURE__*/(() => {\n  class DashboardComponent {\n    authService;\n    reportService;\n    router;\n    currentUser = null;\n    stats = null;\n    loading = true;\n    constructor(authService, reportService, router) {\n      this.authService = authService;\n      this.reportService = reportService;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.currentUser = this.authService.getCurrentUser();\n      this.loadDashboardStats();\n    }\n    loadDashboardStats() {\n      this.reportService.getDashboardStats().subscribe({\n        next: data => {\n          this.stats = data;\n          this.loading = false;\n        },\n        error: () => {\n          this.loading = false;\n        }\n      });\n    }\n    logout() {\n      this.authService.logout();\n      this.router.navigate(['/login']);\n    }\n    // Méthodes pour vérifier le rôle\n    isCitizen() {\n      return this.currentUser?.role?.toUpperCase() === 'CITIZEN';\n    }\n    isAgent() {\n      return this.currentUser?.role?.toUpperCase() === 'AGENT';\n    }\n    isChief() {\n      return this.currentUser?.role?.toUpperCase() === 'CHIEF';\n    }\n    isAdmin() {\n      return this.currentUser?.role?.toUpperCase() === 'ADMIN';\n    }\n    static ɵfac = function DashboardComponent_Factory(t) {\n      return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ReportService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: DashboardComponent,\n      selectors: [[\"app-dashboard\"]],\n      decls: 31,\n      vars: 11,\n      consts: [[1, \"dashboard-container\"], [1, \"sidebar\"], [1, \"sidebar-header\"], [4, \"ngIf\"], [1, \"nav-menu\"], [\"routerLinkActive\", \"active\"], [\"routerLink\", \"/dashboard/home\"], [1, \"icon\"], [\"routerLinkActive\", \"active\", 4, \"ngIf\"], [1, \"sidebar-footer\"], [1, \"btn-logout\", 3, \"click\"], [1, \"main-content\"], [\"routerLink\", \"/dashboard/claims\"], [\"routerLink\", \"/dashboard/hr\"], [\"routerLink\", \"/dashboard/reports\"], [\"routerLink\", \"/dashboard/budget\"], [\"routerLink\", \"/dashboard/admin/logs\"]],\n      template: function DashboardComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"nav\", 1)(2, \"div\", 2)(3, \"h2\");\n          i0.ɵɵtext(4, \"ERP Tunis\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(5, DashboardComponent_p_5_Template, 2, 1, \"p\", 3);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"ul\", 4)(7, \"li\", 5)(8, \"a\", 6)(9, \"span\", 7);\n          i0.ɵɵtext(10, \"\\uD83D\\uDCCA\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"span\");\n          i0.ɵɵtext(12, \"Tableau de bord\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵtemplate(13, DashboardComponent_li_13_Template, 6, 0, \"li\", 8)(14, DashboardComponent_li_14_Template, 6, 0, \"li\", 8)(15, DashboardComponent_li_15_Template, 6, 0, \"li\", 8)(16, DashboardComponent_li_16_Template, 6, 0, \"li\", 8)(17, DashboardComponent_li_17_Template, 6, 0, \"li\", 8)(18, DashboardComponent_li_18_Template, 6, 0, \"li\", 8)(19, DashboardComponent_li_19_Template, 6, 0, \"li\", 8)(20, DashboardComponent_li_20_Template, 6, 0, \"li\", 8)(21, DashboardComponent_li_21_Template, 6, 0, \"li\", 8)(22, DashboardComponent_li_22_Template, 6, 0, \"li\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 9)(24, \"button\", 10);\n          i0.ɵɵlistener(\"click\", function DashboardComponent_Template_button_click_24_listener() {\n            return ctx.logout();\n          });\n          i0.ɵɵelementStart(25, \"span\", 7);\n          i0.ɵɵtext(26, \"\\uD83D\\uDEAA\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"span\");\n          i0.ɵɵtext(28, \"D\\u00E9connexion\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(29, \"main\", 11);\n          i0.ɵɵelement(30, \"router-outlet\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.currentUser);\n          i0.ɵɵadvance(8);\n          i0.ɵɵproperty(\"ngIf\", ctx.isCitizen());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isCitizen());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAgent() || ctx.isChief() || ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAgent());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isChief() || ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isChief() || ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.isAdmin());\n        }\n      },\n      dependencies: [i4.NgIf, i3.RouterOutlet, i3.RouterLink, i3.RouterLinkActive],\n      styles: [\".dashboard-container[_ngcontent-%COMP%]{display:flex;height:100vh}.sidebar[_ngcontent-%COMP%]{width:250px;background:#2c3e50;color:#fff;display:flex;flex-direction:column}.sidebar-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #34495e}.sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:20px}.sidebar-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;opacity:.8}.nav-menu[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;flex:1}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:1px solid #34495e}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 20px;color:#fff;text-decoration:none;transition:background .3s}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-menu[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background:#34495e}.nav-menu[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:10px;font-size:18px}.sidebar-footer[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #34495e}.btn-logout[_ngcontent-%COMP%]{width:100%;padding:10px;background:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px}.btn-logout[_ngcontent-%COMP%]:hover{background:#c0392b}.btn-logout[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-right:8px}.main-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background:#ecf0f1}\"]\n    });\n  }\n  return DashboardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}