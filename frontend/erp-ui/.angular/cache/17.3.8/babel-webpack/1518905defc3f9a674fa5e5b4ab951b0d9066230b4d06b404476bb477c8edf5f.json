{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component } from '@angular/core';\nlet HomeComponent = class HomeComponent {\n  authService;\n  claimService;\n  router;\n  currentUser = null;\n  loading = true;\n  // Statistiques dynamiques\n  stats = {\n    users: 0,\n    budget: 0,\n    claims: 0,\n    projects: 0,\n    performance: 0,\n    resolved: 0,\n    agents: 0,\n    teamPerformance: 0\n  };\n  constructor(authService, claimService, router) {\n    this.authService = authService;\n    this.claimService = claimService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.currentUser = this.authService.getCurrentUser();\n    if (!this.currentUser) {\n      this.router.navigate(['/login']);\n      return;\n    }\n    this.loadDynamicStats();\n  }\n  loadDynamicStats() {\n    // Charger les vraies statistiques depuis l'API\n    this.claimService.getStats().subscribe({\n      next: claimStats => {\n        this.stats.claims = claimStats.total;\n        this.stats.resolved = claimStats.resolved;\n        // Calculer la performance basée sur les réclamations résolues\n        if (claimStats.total > 0) {\n          this.stats.performance = Math.round(claimStats.resolved / claimStats.total * 100);\n          this.stats.teamPerformance = this.stats.performance;\n        }\n        this.loading = false;\n      },\n      error: () => {\n        // Valeurs par défaut si API échoue\n        this.stats = {\n          users: 150,\n          budget: 5000000,\n          claims: 23,\n          projects: 8,\n          performance: 95,\n          resolved: 156,\n          agents: 12,\n          teamPerformance: 85\n        };\n        this.loading = false;\n      }\n    });\n  }\n  isCitizen() {\n    return this.currentUser?.role?.toUpperCase() === 'CITIZEN';\n  }\n  isAgent() {\n    return this.currentUser?.role?.toUpperCase() === 'AGENT';\n  }\n  isChief() {\n    return this.currentUser?.role?.toUpperCase() === 'CHIEF';\n  }\n  isAdmin() {\n    return this.currentUser?.role?.toUpperCase() === 'ADMIN';\n  }\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"names":["Component","HomeComponent","authService","claimService","router","currentUser","loading","stats","users","budget","claims","projects","performance","resolved","agents","teamPerformance","constructor","ngOnInit","getCurrentUser","navigate","loadDynamicStats","getStats","subscribe","next","claimStats","total","Math","round","error","isCitizen","role","toUpperCase","isAgent","isChief","isAdmin","__decorate","selector","templateUrl","styleUrls"],"sources":["/home/sahar/Bureau/ERp/frontend/erp-ui/src/app/dashboard/home/home.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ReportService } from '../../services/report.service';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport { ClaimService } from '../../services/claim.service';\nimport { User } from '../../models/user.model';\nimport { ClaimStats } from '../../models/claim.model';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.css']\n})\nexport class HomeComponent implements OnInit {\n  currentUser: User | null = null;\n  loading = true;\n  \n  // Statistiques dynamiques\n  stats = {\n    users: 0,\n    budget: 0,\n    claims: 0,\n    projects: 0,\n    performance: 0,\n    resolved: 0,\n    agents: 0,\n    teamPerformance: 0\n  };\n\n  constructor(\n    private authService: AuthService,\n    private claimService: ClaimService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.currentUser = this.authService.getCurrentUser();\n    if (!this.currentUser) {\n      this.router.navigate(['/login']);\n      return;\n    }\n    \n    this.loadDynamicStats();\n  }\n\n  loadDynamicStats(): void {\n    // Charger les vraies statistiques depuis l'API\n    this.claimService.getStats().subscribe({\n      next: (claimStats: ClaimStats) => {\n        this.stats.claims = claimStats.total;\n        this.stats.resolved = claimStats.resolved;\n        \n        // Calculer la performance basée sur les réclamations résolues\n        if (claimStats.total > 0) {\n          this.stats.performance = Math.round((claimStats.resolved / claimStats.total) * 100);\n          this.stats.teamPerformance = this.stats.performance;\n        }\n        \n        this.loading = false;\n      },\n      error: () => {\n        // Valeurs par défaut si API échoue\n        this.stats = {\n          users: 150,\n          budget: 5000000,\n          claims: 23,\n          projects: 8,\n          performance: 95,\n          resolved: 156,\n          agents: 12,\n          teamPerformance: 85\n        };\n        this.loading = false;\n      }\n    });\n  }\n  isCitizen(): boolean {\n    return this.currentUser?.role?.toUpperCase() === 'CITIZEN';\n  }\n\n  isAgent(): boolean {\n    return this.currentUser?.role?.toUpperCase() === 'AGENT';\n  }\n\n  isChief(): boolean {\n    return this.currentUser?.role?.toUpperCase() === 'CHIEF';\n  }\n\n  isAdmin(): boolean {\n    return this.currentUser?.role?.toUpperCase() === 'ADMIN';\n  }\n}\n"],"mappings":";;;;;;;AAAA,SAASA,SAAS,QAAgB,eAAe;AAc1C,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAiBdC,WAAA;EACAC,YAAA;EACAC,MAAA;EAlBVC,WAAW,GAAgB,IAAI;EAC/BC,OAAO,GAAG,IAAI;EAEd;EACAC,KAAK,GAAG;IACNC,KAAK,EAAE,CAAC;IACRC,MAAM,EAAE,CAAC;IACTC,MAAM,EAAE,CAAC;IACTC,QAAQ,EAAE,CAAC;IACXC,WAAW,EAAE,CAAC;IACdC,QAAQ,EAAE,CAAC;IACXC,MAAM,EAAE,CAAC;IACTC,eAAe,EAAE;GAClB;EAEDC,YACUd,WAAwB,EACxBC,YAA0B,EAC1BC,MAAc;IAFd,KAAAF,WAAW,GAAXA,WAAW;IACX,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,MAAM,GAANA,MAAM;EACb;EAEHa,QAAQA,CAAA;IACN,IAAI,CAACZ,WAAW,GAAG,IAAI,CAACH,WAAW,CAACgB,cAAc,EAAE;IACpD,IAAI,CAAC,IAAI,CAACb,WAAW,EAAE;MACrB,IAAI,CAACD,MAAM,CAACe,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;MAChC;IACF;IAEA,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEAA,gBAAgBA,CAAA;IACd;IACA,IAAI,CAACjB,YAAY,CAACkB,QAAQ,EAAE,CAACC,SAAS,CAAC;MACrCC,IAAI,EAAGC,UAAsB,IAAI;QAC/B,IAAI,CAACjB,KAAK,CAACG,MAAM,GAAGc,UAAU,CAACC,KAAK;QACpC,IAAI,CAAClB,KAAK,CAACM,QAAQ,GAAGW,UAAU,CAACX,QAAQ;QAEzC;QACA,IAAIW,UAAU,CAACC,KAAK,GAAG,CAAC,EAAE;UACxB,IAAI,CAAClB,KAAK,CAACK,WAAW,GAAGc,IAAI,CAACC,KAAK,CAAEH,UAAU,CAACX,QAAQ,GAAGW,UAAU,CAACC,KAAK,GAAI,GAAG,CAAC;UACnF,IAAI,CAAClB,KAAK,CAACQ,eAAe,GAAG,IAAI,CAACR,KAAK,CAACK,WAAW;QACrD;QAEA,IAAI,CAACN,OAAO,GAAG,KAAK;MACtB,CAAC;MACDsB,KAAK,EAAEA,CAAA,KAAK;QACV;QACA,IAAI,CAACrB,KAAK,GAAG;UACXC,KAAK,EAAE,GAAG;UACVC,MAAM,EAAE,OAAO;UACfC,MAAM,EAAE,EAAE;UACVC,QAAQ,EAAE,CAAC;UACXC,WAAW,EAAE,EAAE;UACfC,QAAQ,EAAE,GAAG;UACbC,MAAM,EAAE,EAAE;UACVC,eAAe,EAAE;SAClB;QACD,IAAI,CAACT,OAAO,GAAG,KAAK;MACtB;KACD,CAAC;EACJ;EACAuB,SAASA,CAAA;IACP,OAAO,IAAI,CAACxB,WAAW,EAAEyB,IAAI,EAAEC,WAAW,EAAE,KAAK,SAAS;EAC5D;EAEAC,OAAOA,CAAA;IACL,OAAO,IAAI,CAAC3B,WAAW,EAAEyB,IAAI,EAAEC,WAAW,EAAE,KAAK,OAAO;EAC1D;EAEAE,OAAOA,CAAA;IACL,OAAO,IAAI,CAAC5B,WAAW,EAAEyB,IAAI,EAAEC,WAAW,EAAE,KAAK,OAAO;EAC1D;EAEAG,OAAOA,CAAA;IACL,OAAO,IAAI,CAAC7B,WAAW,EAAEyB,IAAI,EAAEC,WAAW,EAAE,KAAK,OAAO;EAC1D;CACD;AA9EY9B,aAAa,GAAAkC,UAAA,EALzBnC,SAAS,CAAC;EACToC,QAAQ,EAAE,UAAU;EACpBC,WAAW,EAAE,uBAAuB;EACpCC,SAAS,EAAE,CAAC,sBAAsB;CACnC,CAAC,C,EACWrC,aAAa,CA8EzB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}