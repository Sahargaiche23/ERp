<div class="page-container">
  <div class="page-header">
    <h1>‚ûï Nouvel Employ√©</h1>
    <p>Ajouter un nouveau membre √† l'√©quipe</p>
  </div>

  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="employee-form">
    <!-- Informations de base -->
    <div class="form-section">
      <h2>Informations de Base</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label for="matricule">Matricule *</label>
          <input
            id="matricule"
            type="text"
            formControlName="matricule"
            class="form-control"
            readonly
          />
        </div>

        <div class="form-group">
          <label for="firstName">Pr√©nom *</label>
          <input
            id="firstName"
            type="text"
            formControlName="firstName"
            class="form-control"
            placeholder="Pr√©nom"
          />
          <div class="error" *ngIf="employeeForm.get('firstName')?.invalid && employeeForm.get('firstName')?.touched">
            Le pr√©nom est requis (min 2 caract√®res)
          </div>
        </div>

        <div class="form-group">
          <label for="lastName">Nom *</label>
          <input
            id="lastName"
            type="text"
            formControlName="lastName"
            class="form-control"
            placeholder="Nom"
          />
          <div class="error" *ngIf="employeeForm.get('lastName')?.invalid && employeeForm.get('lastName')?.touched">
            Le nom est requis (min 2 caract√®res)
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="email">Email Professionnel *</label>
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-control"
            placeholder="nom.prenom@mairie-tunis.tn"
          />
          <div class="error" *ngIf="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched">
            Email valide requis
          </div>
        </div>

        <div class="form-group">
          <label for="phone">T√©l√©phone *</label>
          <input
            id="phone"
            type="tel"
            formControlName="phone"
            class="form-control"
            placeholder="+216 XX XXX XXX"
          />
          <div class="error" *ngIf="employeeForm.get('phone')?.invalid && employeeForm.get('phone')?.touched">
            Le t√©l√©phone est requis
          </div>
        </div>
      </div>
    </div>

    <!-- Informations professionnelles -->
    <div class="form-section">
      <h2>Informations Professionnelles</h2>

      <div class="form-row">
        <div class="form-group">
          <label for="department">D√©partement *</label>
          <select
            id="department"
            formControlName="department"
            class="form-control"
          >
            <option value="">-- S√©lectionnez un d√©partement --</option>
            <option *ngFor="let dept of departments" [value]="dept.value">
              {{ dept.label }}
            </option>
          </select>
          <div class="error" *ngIf="employeeForm.get('department')?.invalid && employeeForm.get('department')?.touched">
            Le d√©partement est requis
          </div>
        </div>

        <div class="form-group">
          <label for="position">Poste *</label>
          <select
            id="position"
            formControlName="position"
            class="form-control"
          >
            <option value="">-- S√©lectionnez un poste --</option>
            <option *ngFor="let pos of positions" [value]="pos.value">
              {{ pos.label }}
            </option>
          </select>
          <div class="error" *ngIf="employeeForm.get('position')?.invalid && employeeForm.get('position')?.touched">
            Le poste est requis
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="hireDate">Date d'Embauche *</label>
          <input
            id="hireDate"
            type="date"
            formControlName="hireDate"
            class="form-control"
          />
          <div class="error" *ngIf="employeeForm.get('hireDate')?.invalid && employeeForm.get('hireDate')?.touched">
            La date d'embauche est requise
          </div>
        </div>

        <div class="form-group">
          <label for="salary">Salaire (TND) *</label>
          <input
            id="salary"
            type="number"
            formControlName="salary"
            class="form-control"
            placeholder="1500.00"
          />
          <div class="error" *ngIf="employeeForm.get('salary')?.invalid && employeeForm.get('salary')?.touched">
            Le salaire est requis
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="status">Statut *</label>
        <select
          id="status"
          formControlName="status"
          class="form-control"
        >
          <option value="ACTIVE">Actif</option>
          <option value="ON_LEAVE">En cong√©</option>
          <option value="SUSPENDED">Suspendu</option>
          <option value="TERMINATED">Termin√©</option>
        </select>
      </div>
    </div>

    <!-- Message de succ√®s/erreur -->
    <div class="message" [class.success]="success" [class.error]="!success" *ngIf="message">
      {{ message }}
    </div>

    <!-- Boutons d'action -->
    <div class="form-actions">
      <button type="button" (click)="cancel()" class="btn btn-secondary" [disabled]="loading">
        Annuler
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading || employeeForm.invalid">
        <span *ngIf="!loading">üíæ Enregistrer l'Employ√©</span>
        <span *ngIf="loading">Enregistrement en cours...</span>
      </button>
    </div>
  </form>
</div>
