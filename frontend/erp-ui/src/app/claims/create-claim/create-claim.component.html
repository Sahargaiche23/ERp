<div class="page-container">
  <div class="page-header">
    <h1>üìù Nouvelle R√©clamation</h1>
    <p>D√©crivez votre probl√®me et nous le traiterons dans les meilleurs d√©lais</p>
  </div>

  <form [formGroup]="claimForm" (ngSubmit)="onSubmit()" class="claim-form">
    <!-- Informations du citoyen -->
    <div class="form-section">
      <h2>Vos Informations</h2>
      
      <div class="form-row">
        <div class="form-group">
          <label for="citizenName">Nom complet *</label>
          <input
            id="citizenName"
            type="text"
            formControlName="citizenName"
            class="form-control"
            placeholder="Votre nom complet"
          />
          <div class="error" *ngIf="claimForm.get('citizenName')?.invalid && claimForm.get('citizenName')?.touched">
            Le nom est requis
          </div>
        </div>

        <div class="form-group">
          <label for="citizenPhone">T√©l√©phone *</label>
          <input
            id="citizenPhone"
            type="tel"
            formControlName="citizenPhone"
            class="form-control"
            placeholder="+216 XX XXX XXX"
          />
          <div class="error" *ngIf="claimForm.get('citizenPhone')?.invalid && claimForm.get('citizenPhone')?.touched">
            Le t√©l√©phone est requis
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="citizenEmail">Email *</label>
        <input
          id="citizenEmail"
          type="email"
          formControlName="citizenEmail"
          class="form-control"
          placeholder="votre.email@example.com"
        />
        <div class="error" *ngIf="claimForm.get('citizenEmail')?.invalid && claimForm.get('citizenEmail')?.touched">
          Un email valide est requis
        </div>
      </div>
    </div>

    <!-- D√©tails de la r√©clamation -->
    <div class="form-section">
      <h2>D√©tails de la R√©clamation</h2>

      <div class="form-row">
        <div class="form-group">
          <label for="category">Cat√©gorie *</label>
          <select
            id="category"
            formControlName="category"
            class="form-control"
          >
            <option value="">-- S√©lectionnez une cat√©gorie --</option>
            <option *ngFor="let cat of categories" [value]="cat.value">
              {{ cat.label }}
            </option>
          </select>
          <div class="error" *ngIf="claimForm.get('category')?.invalid && claimForm.get('category')?.touched">
            La cat√©gorie est requise
          </div>
        </div>

        <div class="form-group">
          <label for="priority">Priorit√© *</label>
          <select
            id="priority"
            formControlName="priority"
            class="form-control"
          >
            <option *ngFor="let prio of priorities" [value]="prio.value">
              {{ prio.icon }} {{ prio.label }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="subject">Sujet *</label>
        <input
          id="subject"
          type="text"
          formControlName="subject"
          class="form-control"
          placeholder="R√©sum√© de votre r√©clamation"
        />
        <div class="error" *ngIf="claimForm.get('subject')?.invalid && claimForm.get('subject')?.touched">
          Le sujet doit contenir au moins 5 caract√®res
        </div>
      </div>

      <div class="form-group">
        <label for="description">Description d√©taill√©e *</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          rows="5"
          placeholder="D√©crivez en d√©tail votre r√©clamation..."
        ></textarea>
        <div class="form-hint">Minimum 20 caract√®res</div>
        <div class="error" *ngIf="claimForm.get('description')?.invalid && claimForm.get('description')?.touched">
          La description doit contenir au moins 20 caract√®res
        </div>
      </div>

      <div class="form-group">
        <label for="address">Adresse / Localisation *</label>
        <input
          id="address"
          type="text"
          formControlName="address"
          class="form-control"
          placeholder="Adresse exacte du probl√®me"
        />
        <div class="error" *ngIf="claimForm.get('address')?.invalid && claimForm.get('address')?.touched">
          L'adresse est requise
        </div>
      </div>
    </div>

    <!-- Message de succ√®s/erreur -->
    <div class="message" [class.success]="success" [class.error]="!success" *ngIf="message">
      {{ message }}
    </div>

    <!-- Boutons d'action -->
    <div class="form-actions">
      <button type="button" (click)="cancel()" class="btn btn-secondary" [disabled]="loading">
        Annuler
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading || claimForm.invalid">
        <span *ngIf="!loading">üì§ Soumettre la r√©clamation</span>
        <span *ngIf="loading">Envoi en cours...</span>
      </button>
    </div>
  </form>
</div>
