<div class="page-container">
  <!-- Header dynamique selon le rÃ´le -->
  <div class="page-header">
    <h1 *ngIf="isCitizen()">ğŸ  Tableau de Bord Citoyen</h1>
    <h1 *ngIf="isAgent()">ğŸ› ï¸ Tableau de Bord Agent</h1>
    <h1 *ngIf="isChief()">ğŸ‘” Tableau de Bord Chef de Service</h1>
    <h1 *ngIf="isAdmin()">âš™ï¸ Tableau de Bord Administrateur</h1>
    <p *ngIf="currentUser">Bienvenue, {{ currentUser.fullName || currentUser.username }}</p>
  </div>

  <div class="loading" *ngIf="loading">Chargement...</div>

  <div *ngIf="isCitizen() && !loading">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-content">
          <h3>{{ stats?.claims || 0 }}</h3>
          <p>Mes RÃ©clamations en cours</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ stats?.resolved || 0 }}</h3>
          <p>RÃ©clamations rÃ©solues</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ””</div>
        <div class="stat-content">
          <h3>{{ stats?.notifications || 0 }}</h3>
          <p>Notifications</p>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Actions Rapides</h2>
      <div class="actions-grid">
        <button routerLink="/dashboard/claims/new" class="action-btn">
          <span class="icon">ğŸ“</span>
          <span>Nouvelle RÃ©clamation</span>
        </button>
        <button routerLink="/dashboard/claims" class="action-btn">
          <span class="icon">ğŸ‘€</span>
          <span>Voir Mes RÃ©clamations</span>
        </button>
        <button routerLink="/dashboard/home" class="action-btn">
          <span class="icon">ğŸ“œ</span>
          <span>Historique</span>
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isAgent() && !loading">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <h3>{{ stats?.claims || 0 }}</h3>
          <p>RÃ©clamations AssignÃ©es</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ stats?.resolved || 0 }}</h3>
          <p>RÃ©clamations TraitÃ©es</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">â±ï¸</div>
        <div class="stat-content">
          <h3>{{ (stats?.claims || 0) - (stats?.resolved || 0) }}</h3>
          <p>TÃ¢ches en cours</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-content">
          <h3>{{ stats?.performance || 0 }}%</h3>
          <p>Taux de RÃ©solution</p>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Actions Rapides</h2>
      <div class="actions-grid">
        <button routerLink="/dashboard/claims" class="action-btn">
          <span class="icon">ğŸ“‹</span>
          <span>Voir RÃ©clamations</span>
        </button>
        <button routerLink="/dashboard/claims" class="action-btn">
          <span class="icon">âœ…</span>
          <span>Mes TÃ¢ches</span>
        </button>
        <button routerLink="/dashboard/home" class="action-btn">
          <span class="icon">ğŸ“</span>
          <span>Ajouter Commentaire</span>
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isChief() && !loading">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-content">
          <h3>{{ stats?.claims }}</h3>
          <p>RÃ©clamations en cours</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <h3>{{ stats?.agents }}</h3>
          <p>Agents dans l'Ã©quipe</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“ˆ</div>
        <div class="stat-content">
          <h3>{{ stats?.teamPerformance }}%</h3>
          <p>Performance Ã‰quipe</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">âœ…</div>
        <div class="stat-content">
          <h3>{{ stats?.resolved }}</h3>
          <p>RÃ©clamations RÃ©solues</p>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Actions Rapides</h2>
      <div class="actions-grid">
        <button routerLink="/dashboard/claims" class="action-btn">
          <span class="icon">ğŸ“‹</span>
          <span>Assigner RÃ©clamation</span>
        </button>
        <button routerLink="/dashboard/hr" class="action-btn">
          <span class="icon">ğŸ‘¥</span>
          <span>GÃ©rer Ã‰quipe</span>
        </button>
        <button routerLink="/dashboard/reports" class="action-btn">
          <span class="icon">ğŸ“Š</span>
          <span>GÃ©nÃ©rer Rapport</span>
        </button>
        <button routerLink="/dashboard/home" class="action-btn">
          <span class="icon">âœ…</span>
          <span>Valider RÃ©solutions</span>
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="isAdmin() && !loading">
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <h3>{{ stats?.users }}</h3>
          <p>Utilisateurs Total</p>
          <span class="stat-detail">{{ (stats?.users * 0.8) | number:'1.0-0' }} actifs</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ’°</div>
        <div class="stat-content">
          <h3>{{ stats?.budget | number }}â‚¬</h3>
          <p>Budget Total</p>
          <span class="stat-detail">+10% ce mois</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“</div>
        <div class="stat-content">
          <h3>{{ stats?.claims }}</h3>
          <p>RÃ©clamations en cours</p>
          <span class="stat-detail">{{ stats?.resolved }} rÃ©solues</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ—ï¸</div>
        <div class="stat-content">
          <h3>{{ stats?.projects }}</h3>
          <p>Projets Actifs</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-content">
          <h3>{{ stats?.performance }}%</h3>
          <p>Performance Globale</p>
        </div>
      </div>
    </div>

    <div class="quick-actions">
      <h2>Actions Rapides</h2>
      <div class="actions-grid">
        <button routerLink="/dashboard/hr/employees/new" class="action-btn">
          <span class="icon">â•</span>
          <span>Nouvel EmployÃ©</span>
        </button>
        <button routerLink="/dashboard/budget/budgets/new" class="action-btn">
          <span class="icon">ğŸ’°</span>
          <span>Nouveau Budget</span>
        </button>
        <button routerLink="/dashboard/reports" class="action-btn">
          <span class="icon">ğŸ“Š</span>
          <span>Rapports Globaux</span>
        </button>
        <button routerLink="/dashboard/home" class="action-btn">
          <span class="icon">âš™ï¸</span>
          <span>Configuration</span>
        </button>
        <button routerLink="/dashboard/admin/logs" class="action-btn">
          <span class="icon">ğŸ“‹</span>
          <span>Logs & Audit</span>
        </button>
      </div>
    </div>
  </div>
</div>
