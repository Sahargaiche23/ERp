<div class="page-container">
  <div class="page-header">
    <h1>ğŸ’° Nouveau Budget</h1>
    <p>CrÃ©er un nouveau budget municipal</p>
  </div>

  <form [formGroup]="budgetForm" (ngSubmit)="onSubmit()" class="budget-form">
    <div class="form-section">
      <h2>Informations GÃ©nÃ©rales</h2>
      
      <div class="form-group">
        <label for="department">DÃ©partement *</label>
        <input
          id="department"
          type="text"
          formControlName="department"
          class="form-control"
          placeholder="Ex: Travaux Publics, Services Techniques, Finances"
        />
        <div class="error" *ngIf="budgetForm.get('department')?.invalid && budgetForm.get('department')?.touched">
          Le dÃ©partement est requis
        </div>
      </div>

      <div class="form-group">
        <label for="year">AnnÃ©e Fiscale *</label>
        <select id="year" formControlName="year" class="form-control">
          <option *ngFor="let year of fiscalYears" [value]="year.value">
            {{ year.label }}
          </option>
        </select>
      </div>
    </div>

    <div class="form-section">
      <h2>Montants</h2>

      <div class="form-row">
        <div class="form-group">
          <label for="totalAllocated">Budget AllouÃ© (â‚¬) *</label>
          <input
            id="totalAllocated"
            type="number"
            formControlName="totalAllocated"
            class="form-control"
            placeholder="1000000"
            min="1000"
          />
          <div class="form-hint">Montant total allouÃ© pour ce budget</div>
          <div class="error" *ngIf="budgetForm.get('totalAllocated')?.invalid && budgetForm.get('totalAllocated')?.touched">
            Le montant doit Ãªtre supÃ©rieur Ã  1000â‚¬
          </div>
        </div>

        <div class="form-group">
          <label for="totalSpent">Montant DÃ©pensÃ© (â‚¬)</label>
          <input
            id="totalSpent"
            type="number"
            formControlName="totalSpent"
            class="form-control"
            placeholder="0"
            min="0"
          />
          <div class="form-hint">Montant dÃ©jÃ  dÃ©pensÃ© (dÃ©faut: 0)</div>
        </div>
      </div>
    </div>

    <div class="form-section">
      <h2>Statut</h2>

      <div class="form-group">
        <label for="status">Statut *</label>
        <select id="status" formControlName="status" class="form-control">
          <option value="DRAFT">ğŸ“ Brouillon</option>
          <option value="APPROVED">âœ… ApprouvÃ©</option>
          <option value="IN_PROGRESS">â³ En cours</option>
          <option value="CLOSED">ğŸ”’ FermÃ©</option>
        </select>
        <div class="form-hint">Statut actuel du budget</div>
      </div>
    </div>

    <div class="message" [class.success]="success" [class.error]="!success" *ngIf="message">
      {{ message }}
    </div>

    <div class="form-actions">
      <button type="button" (click)="cancel()" class="btn btn-secondary" [disabled]="loading">
        Annuler
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="loading || budgetForm.invalid">
        <span *ngIf="!loading">ğŸ’¾ CrÃ©er le Budget</span>
        <span *ngIf="loading">CrÃ©ation en cours...</span>
      </button>
    </div>
  </form>
</div>
